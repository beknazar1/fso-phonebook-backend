(window.webpackJsonpphonebook=window.webpackJsonpphonebook||[]).push([[0],{14:function(e,t,n){e.exports=n(37)},19:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(13),u=n.n(o),c=(n(19),n(2)),i=n(3),l=n.n(i),s="/api/persons",f=function(){return l.a.get(s).then((function(e){return e.data}))},m=function(e){return l.a.post(s,e).then((function(e){return e.data}))},d=function(e){return l.a.delete("".concat(s,"/").concat(e)).then((function(){return e}))},b=function(e,t){return l.a.put("".concat(s,"/").concat(e),t).then((function(e){return e.data}))},v=function(e){var t=e.persons,n=e.setPersons,o=e.setNotification,u=e.setErrorMessage,i=Object(r.useState)(""),l=Object(c.a)(i,2),s=l[0],f=l[1],d=Object(r.useState)(""),v=Object(c.a)(d,2),p=v[0],E=v[1];return a.a.createElement("form",{onSubmit:function(e){e.preventDefault();var r=t.filter((function(e){return e.name===s})),a={name:s,number:p};if(r.length>0){if(window.confirm("".concat(s," is already added to phonebook, replace the old number with new one?"))){var c=r[0].id;b(c,a).then((function(e){n(t.map((function(t){return t.id!==c?t:e}))),o("Updated ".concat(e.name," succesfully")),setTimeout((function(){return o(null)}),3e3),f(""),E("")})).catch((function(e){u("Information of ".concat(s," has already been deleted from server")),setTimeout((function(){return u(null)}),3e3),n(t.filter((function(e){return e.id!==c}))),f(""),E("")}))}}else m(a).then((function(e){n(t.concat(e)),o("Added ".concat(e.name," succesfully")),setTimeout((function(){return o(null)}),3e3),f(""),E("")}))}},a.a.createElement("div",null,"name: ",a.a.createElement("input",{value:s,onChange:function(e){f(e.target.value)}})),a.a.createElement("div",null,"number: ",a.a.createElement("input",{value:p,onChange:function(e){E(e.target.value)}})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add")))},p=function(e){var t=e.filter,n=e.setFilter;return a.a.createElement("form",null,a.a.createElement("div",null,"filter shown with ",a.a.createElement("input",{value:t,onChange:function(e){n(e.target.value)}})))},E=function(e){var t=e.persons,n=e.filter,r=e.setPersons,o=e.setNotification,u=t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())}));return u.map((function(e){return a.a.createElement("div",{key:e.id},e.name," ",e.number,a.a.createElement("button",{onClick:function(){return n=e.id,a=e.name,void(window.confirm("Delete ".concat(a,"?"))&&d(n).then((function(e){r(t.filter((function(t){return t.id!==e}))),o("Deleted ".concat(a," succesfully")),setTimeout((function(){return o(null)}),3e3)})));var n,a}},"Delete"))}))},h=function(e){var t=e.notification,n=e.errorMessage;return null===t&&null===n?null:t?a.a.createElement("div",{className:"notification"},t):n?a.a.createElement("div",{className:"error"},n):void 0},w=function(){var e=Object(r.useState)([]),t=Object(c.a)(e,2),n=t[0],o=t[1],u=Object(r.useState)(""),i=Object(c.a)(u,2),l=i[0],s=i[1],m=Object(r.useState)(null),d=Object(c.a)(m,2),b=d[0],w=d[1],g=Object(r.useState)(null),j=Object(c.a)(g,2),O=j[0],y=j[1];return Object(r.useEffect)((function(){f().then((function(e){o(e),w("Content retrieved succesfully"),setTimeout((function(){return w(null)}),3e3)}))}),[]),a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),a.a.createElement(h,{notification:b,errorMessage:O}),a.a.createElement(p,{filter:l,setFilter:s}),a.a.createElement("h2",null,"add a new person"),a.a.createElement(v,{persons:n,setPersons:o,setNotification:w,setErrorMessage:y}),a.a.createElement("h2",null,"Numbers"),a.a.createElement(E,{persons:n,setPersons:o,filter:l,setNotification:w}))};u.a.render(a.a.createElement(w,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.f14ecf27.chunk.js.map